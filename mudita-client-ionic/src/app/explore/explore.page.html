<ion-header>
    <ion-toolbar color="primary"  style="text-align: center">
      <ion-title>
          {{ myEvent.title }}
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>  
    <ion-card-subtitle padding style="text-align: center">
      <div>
        <button padding [style.color]="preferences.map ? 'red' : 'black'" (click)="showMap()">Map</button>
        <button padding [style.color]="preferences.visualBearing ? 'red' : 'black'" (click)="useVisualBearing()">Bearing</button>
        <button padding [style.color]="preferences.audioBearing ? 'red' : 'black'" (click)="useAudioBearing()">Sonar</button>
        <button padding [style.color]="preferences.speech ? 'red' : 'black'" (click)="useSpeech()">Speech</button>
        <!-- <button padding (click)="showRoute()">Route</button> -->
      </div>
      <!-- <div padding *ngIf="preferences.visualBearing"> -->
        <!-- latidude: {{ myLocation.latitude }} longitude: {{ myLocation.longitude }}<br> -->
        <!-- audioInterval: {{ audioInterval }}<br> -->
        <!-- distance to {{ myLocalFence.tag }}: {{ myLocalFence.distance }} m<br> -->
        <!-- closest geo-fence : {{ myLocalFence.tag }}<br> -->
        <!-- distance: {{ myLocalFence.distance }} | bearing: {{ myHeading - myBearing }} -->
      <!-- </div> -->
      
    <ion-button (click)="onSelectEvent()">
      Select Event
    </ion-button>
    </ion-card-subtitle>
    <div *ngIf="preferences.map">
      <agm-map #map      
        (mapClick)="onCreateNewFence($event)"   
        [style.height.px]="height"
        [latitude]="myLocation.latitude" 
        [longitude]="myLocation.longitude" 
        [zoom]="zoom"
        [mapTypeId]="mapType">
        <agm-marker 
          [latitude]="myLocation.latitude" 
          [longitude]="myLocation.longitude" 
          [label]="myGeoMarkerLabel"
          [iconUrl]="myGeoMarkerIcon">
        </agm-marker>
        <div *ngFor="let fence of myFences">
          <agm-marker *ngIf="fence.show" 
            [latitude]="fence.location.latitude"
            [longitude]="fence.location.longitude"
            [label]="fence.geoMarkerLabel"
            [iconUrl]="fence.geoMarkerIcon">
          </agm-marker>       
          <agm-direction *ngIf="preferences.route"
            [origin]="{ lat: myLocation.latitude, lng: myLocation.longitude }" 
            [destination]="{ lat: myLocalFence.location.latitude, lng: myLocalFence.location.longitude }">
          </agm-direction>
        </div> 
      </agm-map>
    </div>
  </ion-content>

  <ion-footer>
    <ion-card text-center *ngIf="myEvent">        
        <ion-item text-center>
          <ion-thumbnail slot="start">
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == 0" 
              src="../../assets/images/arrow-up-1.jpg">
            </ion-img>
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == -1" 
              src="../../assets/images/arrow-left-1.jpg">
            </ion-img>
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == 1" 
              src="../../assets/images/arrow-right-1.jpg">
            </ion-img>
          </ion-thumbnail>
          <h3>{{ statusMessage }}</h3>
          <ion-thumbnail slot="end">
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == 0 " 
              src="../../assets/images/arrow-up-1.jpg">
            </ion-img>
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == -1" 
              src="../../assets/images/arrow-left-1.jpg">
            </ion-img>
            <ion-img 
              *ngIf="preferences.visualBearing && currentDirection == 1" 
              src="../../assets/images/arrow-right-1.jpg">
            </ion-img>
          </ion-thumbnail>
        </ion-item>
        <ion-button *ngIf="canSelectFence" (click)="onSelectFence()">
          View details for {{ myLocalFence.tag }}
        </ion-button>
    </ion-card>
  </ion-footer>