<ion-header>
    <ion-toolbar color="primary"  style="text-align: center">
      <ion-title>
          {{ myEvent.title }}
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>  
    <ion-card-subtitle padding style="text-align: center">
      <div>
        <button padding (click)="showMap()">Map</button>
        <button padding (click)="visualBearing()">Visual</button>
        <button padding (click)="audioBearing()">Audio</button>
        <button padding (click)="showDirection()">Direction</button>
      </div>
      <div padding *ngIf="preferences.visualBearing">
        <!-- latidude: {{ myLocation.latitude }} longitude: {{ myLocation.longitude }}<br> -->
        <!-- audioInterval: {{ audioInterval }}<br> -->
        <!-- distance to {{ myLocalFence.tag }}: {{ myLocalFence.distance }} m<br> -->
        <!-- closest geo-fence : {{ myLocalFence.tag }}<br> -->
        distance: {{ myLocalFence.distance }} | bearing: {{ myHeading - myBearing }}
      </div>
    </ion-card-subtitle>
    <div *ngIf="preferences.map">
      <agm-map #map      
        (mapClick)="onCreateNewFence($event)"   
        [style.height.px]="height"
        [latitude]="myLocation.latitude" 
        [longitude]="myLocation.longitude" 
        [zoom]="zoom"
        [mapTypeId]="mapType">
        <agm-marker 
          [latitude]="myLocation.latitude" 
          [longitude]="myLocation.longitude" 
          [label]="myGeoMarkerLabel"
          [iconUrl]="myGeoMarkerIcon">
        </agm-marker>
        <div *ngFor="let fence of myFences">
          <agm-marker *ngIf="fence.show" 
            [latitude]="fence.location.latitude"
            [longitude]="fence.location.longitude"
            [label]="fence.geoMarkerLabel"
            [iconUrl]="fence.geoMarkerIcon">
          </agm-marker>       
          <agm-direction *ngIf="preferences.direction"
            [origin]="{ lat: myLocation.latitude, lng: myLocation.longitude }" 
            [destination]="{ lat: myLocalFence.location.latitude, lng: myLocalFence.location.longitude }">
          </agm-direction>
        </div> 
      </agm-map>
    </div>
  
  </ion-content>

  <ion-footer>
      <ion-card color="medium" style="text-align: center" *ngIf="myEvent">
        <div>
          <h3>{{ statusMessage }}</h3>
        </div>
        <div>
          <ion-button *ngIf="canSelectFence" (click)="onSelectFence()">
            View details for {{ myLocalFence.tag }}
          </ion-button>
        </div>
        <!-- <div *ngFor="let fence of myEvent.fences">
          {{ fence.tag }} ({{ fence.distance }} m) {{ fence.show }} 
          <b *ngIf="fence.distance <= reallyCloseMetres">... really close!</b>
        </div> -->
        <br>
      </ion-card>
  </ion-footer>